datasource db {
	provider = "sqlite"
	url = "file:./users_db.db"
}

generator client {
	provider = "prisma-client-js"
}


model User {
	id				Int @id @unique @default(autoincrement())
	name			String
	email			String @unique
	password		String?
	language		String	@default("en")
	rank			Int		@default(0)

	blockedUsers	BlockedUser[]
	friendUsers		Friendship[]
	friendshipReqs	FriendshipRequest[]
}

model FriendshipRequest {
	requester		User @relation(fields: [requesterId], references: [id], onDelete: Cascade)
	requesterId		Int
	requested		User @relation(fields: [requestedId], references: [id], onDelete: Cascade)
	requestedId		Int
	declined		Int
	createdAt		DateTime @default(now())

	@@id([requesterId, requestedId])
}

model Friendship {
	user1		User @relation(fields: [user1Id], references: [id], onDelete: Cascade)
	user1Id		Int
	user2		User @relation(fields: [user2Id], references: [id], onDelete: Cascade)
	user2Id		Int
	createdAt	DateTime @default(now())

	@@id([user1Id, user2Id])
}

model BlockedUser {
	requester		User @relation(fields: [blockerId], references: [id], onDelete: Cascade)
	blockerId		Int
	requested		User @relation(fields: [blockedId], references: [id], onDelete: Cascade)
	blockedId		Int
	createdAt		DateTime @default(now())

	@@id([blockerId, blockedId])
}
